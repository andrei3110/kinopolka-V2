<%- include('../particles/header.ejs') %>


    <div class="content">
        <a href="/addGenres">жанры</a>
        <a href="/addCategories">Категории</a>
        <form action="/AddItems" enctype="multipart/form-data" method="post" id="item-form">

            <div class="create__genre">
                <% for (let i=0; i < genres.length; i++) { %>
                    <div class="create__genre--items">
                        <input type="checkbox" class="checkbox" name="check" value="<%= genres[i].id %>">
                        <label class="create__genre--items__name">
                            <%= genres[i].name %>
                        </label>
                    </div>
                    <% } %>
            </div>

            <div class="create__item__block1">
                <input class="create__item--items" name="description" placeholder="описание">

                <% for (let i=0; i < categories.length; i++) { %>
                    <div class="create__radio__items">
                        <input type="radio" class="radio" name="check__radio" value="<%= categories[i].id %>">
                        <label class="radio__items">
                            <%= categories[i].name %>
                        </label>
                    </div>


                    <% } %>


                        <input class="create__item--items" name="country" placeholder="страна" required>
                        <input class="create__item--items" name="name" placeholder="имя" required>

            </div>
            <div class="create__item__block2">
                <input class="create__item--items" name="year" placeholder="год" required>

                <div class="create__radio__items">
                    <input type="radio" class="radio" name="status" value="подписка">
                    <label class="radio__items">подписка</label>
                </div>
                <div class="create__radio__items">
                    <input type="radio" class="radio" name="status" value="бесплатно">
                    <label class="radio__items">бесплатно</label>
                </div>


                <input class="create__item--items" name="video" placeholder="видео" required>
                <input class="create__item--items" name="treller" placeholder="трейлер" required>
                <input type="file" name="file" accept="image/png, image/jpeg">
            </div>
            <div class="cerate__description">
                <input class="cerate__description--items" name="actor" placeholder="актеры" required>
                <input class="cerate__description--items" name="producer" placeholder="продюсcер" required>
                <input class="cerate__description--items" I name="regicer" placeholder="режиссер" required>
                <input class="cerate__description--items" name="screenwriter" placeholder="сценарист" required>
                <input class="cerate__description--items" name="operator" placeholder="оператор" required>
            </div>
            <input class="btn AddBtn" value="опубликовать" onclick="createItem()">
        </form>

        <script>
            async function createItem() {
                let form = document.querySelector('#item-form');

                let formData = new FormData(form);

                await fetch(form.action, {
                    'method': 'POST', 
                    'body': formData
                });
            }
        </script>

    </div>

    <%- include('../particles/footer.ejs') %>